<h3 class="header smaller lighter blue">List Plugins</h3>

<div class="row">
    <div class="col-sm-3">
        <div class="col-sm-12">
            <form class="form-inline">
                <span ng-show="$ctrl.isExecute==0" class="label label-lg label-pink arrowed-right" ng-click="$ctrl.exec()" style="cursor: pointer;">Execute</span>
                <span ng-show="$ctrl.isExecute==1" class="label label-lg label-pink arrowed-right" style="cursor: pointer;">Executing ...</span>

                <select ng-model="$ctrl.current" ng-change="$ctrl.SelectPlugin()" ng-options="item.name for item in $ctrl.obj track by item._id" class="form-control" style="width: 195px;margin-left: 10px;">
                </select>

                <span ng-show="$ctrl.current">
                    <button type="button" class="btn spinbox-down btn-sm btn-danger" ng-click="$ctrl.removeScript($ctrl.current)">						
                        <i class="icon-only ace-icon fa fa-minus bigger-110"></i>					
                    </button>
                </span>
            </form>
            <hr />

            <div class="well" ng-show="$ctrl.current">
                <h4 class="green smaller lighter" style="text-transform: uppercase;">{{$ctrl.current.name}}</h4>
                <p style="color: #31708f;">{{$ctrl.current.des}}</p>
            </div>

            <hr ng-show="$ctrl.current" />

        </div>
        <div class="col-sm-12" ng-show="$ctrl.current.input">
            <form>
                <div ng-repeat="i in $ctrl.current.input">
                    <!-- Select box -->
                    <div class="form-group" ng-if="i.component=='select-box'">
                        <label>{{i.label}}</label>
                        <select class="form-control" ng-model="$ctrl.currentData.data[i.param]" ng-init="$ctrl.currentData.data[i.param]=i.default">
                        <option ng-repeat="(ikey, ivalue) in i.data" value="{{ikey}}">{{ivalue[ikey]}}</option>
                    </select>
                    </div>
                    <!-- Input Text -->
                    <div class="form-group" ng-if="i.component=='text'">
                        <label>{{i.label}}</label>
                        <input class="form-control" ng-init="$ctrl.currentData.data[i.param]=i.default" type="text" ng-model="$ctrl.currentData.data[i.param]">
                    </div>
                    <!-- Date -->
                    <div class="form-group" ng-if="i.component=='date'">
                        <p>{{i.label}}</p>
                        <input class="form-control" ng-init="$ctrl.currentData.data[i.param]=i.default" type="text" ng-model="$ctrl.currentData.data[i.param]">
                    </div>
                    <!-- Radio -->
                    <div class="control-group" ng-if="i.component=='radio'">
                        <label class="control-label bolder blue">{{i.label}}</label>

                        <div ng-repeat="(ikey, ivalue) in i.data" class="radio" ng-init="$ctrl.currentData.data[i.param]=i.default">
                            <label>
                            <input name="form-field-radio" type="radio" class="ace" ng-model="$ctrl.currentData.data[i.param]" value="{{ikey}}"/>
                            <span class="lbl"> {{ivalue[ikey]}}</span>
                        </label>
                        </div>
                    </div>
                    <!-- Multiple choice -->
                    <div class="control-group" ng-if="i.component=='multi-choice'">
                        <label>{{i.label}}</label>
                        <select class="form-control" ng-model="$ctrl.currentData.data[i.param]" ng-init="$ctrl.currentData.data[i.param]=i.default" multiple>
                        <option ng-repeat="(ikey, ivalue) in i.data" ng-value="{{ikey}}" class="md-primary">{{ivalue[ikey]}}</option>
                    </select>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="col-sm-9" ng-if="$ctrl.oRes">

        <div class="tabbable">
            <ul class="nav nav-tabs" id="myTab">
                <li ng-repeat="item in $ctrl.obj" id="li{{$index}}" ng-class="$index==1?'active':''">
                    <a data-toggle="tab" href="#t{{$index}}">
                        <div><i>VNF: {{item.name}}</i></div>
                        <div><i>Status: New</i></div>
                        <div style="text-align: center;margin: 7px auto;">
                            <i class="brow ace-icon fa fa-info-circle bigger-150" style="font-size: 25px !important;cursor: pointer;"></i>
                            <i class="brow ace-icon fa fa-rocket bigger-150" style="font-size: 25px !important;cursor: pointer;"></i>
                            <!--<i class="brow ace-icon fa fa-reply bigger-150" style="font-size: 25px !important;"></i>-->
                        </div>
                    </a>
                </li>

                <!--<li id="tLogs" ng-click="$ctrl.loadingLogs()">
                    <a data-toggle="tab" href="#logs">
                        <i class="green ace-icon fa fa-history bigger-120"></i> Logs
                    </a>
                </li>
                

                <li id="tUpload">
                    <a data-toggle="tab" href="#upload">
                        <i class="green ace-icon fa fa-cloud-upload bigger-120"></i> Upload Package
                    </a>
                </li>-->

                <li id="tUpload">
                    <a>
                        <i class="green ace-icon fa fa-plus-circle" style="font-size: 55px;padding: 10px;"></i>
                    </a>
                </li>
            </ul>

            <div class="tab-content">
                <div ng-repeat="item in $ctrl.obj" id="t{{$index}}" class="tab-pane fade in {{$index==1?'active':''}}">
                    This is tab {{item.name}}
                </div>
                <!--<div id="result" class="tab-pane fade in active">
                    <p>
                        <div class="alert alert-danger" ng-if="$ctrl.oRes.status==-1">Error {{$ctrl.oRes.status}}</div>
                        <div class="alert alert-block alert-success" ng-if="$ctrl.oRes.status==1">Run successfully (Execute time in {{$ctrl.exeTime($ctrl.oRes.started_time,$ctrl.oRes.finished_time)}}ms)</div>
                    </p>

                    <div class="row">
                        <div class="col-sm-12">
                            <form ng-if="$ctrl.oRes.started_time">
                                <div class="form-group">
                                    <label>ID</label>
                                    <input class="form-control" ng-value="$ctrl.oRes.result['#']" type="text" disabled>
                                </div>
                                <div class="form-group">
                                    <label>Start Time</label>
                                    <input class="form-control" ng-value="$ctrl.oRes.started_time | date:'yyyy-MM-dd HH:mm:ss'" type="text" disabled>
                                </div>

                                <div class="form-group">
                                    <label>Finished Time</label>
                                    <input class="form-control" ng-value="$ctrl.oRes.finished_time | date:'yyyy-MM-dd HH:mm:ss'" type="text" disabled>
                                </div>

                                <label>Result</label>
                                <pre class="col-sm-12 well"><code class="JSON">{{$ctrl.oRes.result}}</code></pre>
                            </form>
                        </div>
                    </div>
                </div>

                <div id="logs" class="tab-pane fade">
                    <table id="dynamic-table" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th></th>
                                <th>_id</th>
                                <th>event_type</th>
                                <th>status</th>
                                <th>title</th>
                                <th>shellclass_id</th>
                                <th>started_time</th>
                                <th>finished_time</th>
                                <th>Results</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="cell in $ctrl.logs">
                                <td>{{$index+1}}</td>
                                <td class="hidden-480">{{cell._id}}</td>
                                <td ng-class="cell.event_type==0?'plf-install':'plf-execute'">{{cell.event_type==0?'Installed':'Executed'}}</td>
                                <td ng-class="cell.status==1?'plf-success':(cell.status==-1?'plf-fail':'plf-running')">{{cell.status==1?'Successed':(cell.status==-1?'Failed':'Running')}}</td>
                                <td>{{cell.title}}</td>
                                <td>{{cell.shellclass_id}}</td>
                                <td>{{cell.started_time | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                                <td>{{cell.finished_time | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                                <td>{{$ctrl.transfer(cell.result)}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="upload" class="tab-pane fade">
                    <upload-file url="$ctrl.url" name="shells" accept=".zip" on-finished="$ctrl.uploadDone({error, resp})"></upload-file>
                </div>-->
            </div>
        </div>



    </div>
</div>