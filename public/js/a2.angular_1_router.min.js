!function(){function a(a,b){var c=a.directive;a.directive=function(a,d){return b.register(a,d),c.apply(this,arguments)}}function c(a,b,c){function e(c,e,f,h,i){var j=function(){function d(a,b){this.controller=a,this.router=b}return d.prototype.cleanupLastView=function(){var b=this;this.previousLeaveAnimation&&(a.cancel(this.previousLeaveAnimation),this.previousLeaveAnimation=null),this.currentScope&&(this.currentScope.$destroy(),this.currentScope=null),this.currentElement&&(this.previousLeaveAnimation=a.leave(this.currentElement),this.previousLeaveAnimation.then(function(){return b.previousLeaveAnimation=null}),this.currentElement=null)},d.prototype.reuse=function(a){var c=b.when(!0),d=this.currentInstruction;return this.currentInstruction=a,this.currentController&&this.currentController.$routerOnReuse&&(c=b.when(this.currentController.$routerOnReuse(this.currentInstruction,d))),c},d.prototype.routerCanReuse=function(a){var c;return c=!(!this.currentInstruction||this.currentInstruction.componentType!==a.componentType)&&(this.currentController&&this.currentController.$routerCanReuse?this.currentController.$routerCanReuse(a,this.currentInstruction):a===this.currentInstruction||angular.equals(a.params,this.currentInstruction.params)),b.when(c)},d.prototype.routerCanDeactivate=function(a){return this.currentController&&this.currentController.$routerCanDeactivate?b.when(this.currentController.$routerCanDeactivate(a,this.currentInstruction)):b.when(!0)},d.prototype.deactivate=function(a){return this.currentController&&this.currentController.$routerOnDeactivate?b.when(this.currentController.$routerOnDeactivate(a,this.currentInstruction)):b.when()},d.prototype.activate=function(d){var f=this;this.previousInstruction=this.currentInstruction,this.currentInstruction=d;var h=this.controller.$$componentName=d.componentType;if("string"!=typeof h)throw new Error("Component is not a string for "+d.urlPath);this.controller.$$template="<"+g(h)+' $router="::$$router"></'+g(h)+">",this.controller.$$router=this.router.childRouter(d.componentType),this.controller.$$outlet=this;var j=c.$new();j.$$router=this.controller.$$router,this.deferredActivation=b.defer();var k=i(j,function(b){a.enter(b,null,f.currentElement||e),f.cleanupLastView()});return this.currentElement=k,this.currentScope=j,this.deferredActivation.promise},d}(),k=h[0],l=h[1],m=k&&k.$$router||d;l.$$currentComponent=null,m.registerPrimaryOutlet(new j(l,m))}var d=c;return{restrict:"AE",transclude:"element",terminal:!0,priority:400,require:["?^^ngOutlet","ngOutlet"],link:e,controller:function(){function a(){}return a}(),controllerAs:"$$ngOutlet"}}function d(a){return{restrict:"EA",priority:-400,require:"ngOutlet",link:function(b,c,d,e){var f=e.$$template;c.html(f),a(c.contents())(b)}}}function e(a){return{require:"^ngOutlet",priority:-1e3,link:function(b,c,d,e){var f=a.when(),g=e.$$outlet,h=g.currentController=c.controller(e.$$componentName);h.$routerOnActivate&&(f=a.when(h.$routerOnActivate(g.currentInstruction,g.previousInstruction))),f.then(g.deferredActivation.resolve,g.deferredActivation.reject)}}}function f(a,b){function c(c,d,e,f){function j(a){return h=g.generate(a),"./"+angular.stringifyInstruction(h)}var g=f&&f.$$router||a;if(g){var h=null,i=e.ngLink||"",k=b(i);if(k.constant){var l=k();d.attr("href",j(l))}else c.$watch(function(){return k(c)},function(a){return d.attr("href",j(a))},!0);d.on("click",function(b){1===b.which&&h&&(a.navigateByInstruction(h),b.preventDefault())})}}return{require:"?^^ngOutlet",restrict:"A",link:c}}function g(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}function h(a,b,c,d,e,f,g){function h(){return function(a){return a}}function i(a){return a}function j(a){return!!a}function k(a){return!a}function l(a){return"string"==typeof a}function m(a){return"function"==typeof a}function n(a){return"object"==typeof a&&null!==a}function o(a){return Array.isArray(a)}function p(a){return a.name||"Root"}function y(){}function C(){}function G(a){return k(a)?null:a.toString()}function I(a){var b=[];return k(a)?[]:(u.forEach(a,function(a,c){b.push(a===!0?c:c+"="+a)}),b)}function J(a,b){return void 0===b&&(b="&"),I(a).join(b)}function M(a){for(var b=new K(a[a.length-1]),c=a.length-2;c>=0;c-=1)b=new K(a[c],b);return b}function O(a){var b=r.firstMatch(N,a);return j(b)?b[0]:""}function U(a,b){return b instanceof Type&&a.name in b.prototype}function V(a){for(var b=s.annotations(a),c=0;c<b.length;c+=1){var d=b[c];if(d instanceof T.CanActivate)return d.fn}return null}function ca(a,b){if(a instanceof ba.AsyncRoute){var c=da(a.loader,b);return new ba.AsyncRoute({path:a.path,loader:c,name:a.name,data:a.data,useAsDefault:a.useAsDefault})}if(a instanceof ba.Route||a instanceof ba.Redirect||a instanceof ba.AuxRoute)return a;if(+!!a.component+ +!!a.redirectTo+ +!!a.loader!=1)throw new z('Route config should contain exactly one "component", "loader", or "redirectTo" property.');if(a.as&&a.name)throw new z('Route config should contain exactly one "as" or "name" property.');if(a.as&&(a.name=a.as),a.loader){var c=da(a.loader,b);return new ba.AsyncRoute({path:a.path,loader:c,name:a.name,data:a.data,useAsDefault:a.useAsDefault})}if(a.aux)return new ba.AuxRoute({path:a.aux,component:a.component,name:a.name});if(a.component){if("object"==typeof a.component){var d=a.component;if("constructor"==d.type)return new ba.Route({path:a.path,component:d.constructor,name:a.name,data:a.data,useAsDefault:a.useAsDefault});if("loader"==d.type)return new ba.AsyncRoute({path:a.path,loader:d.loader,name:a.name,data:a.data,useAsDefault:a.useAsDefault});throw new z('Invalid component type "'+d.type+'". Valid types are "constructor" and "loader".')}return new ba.Route(a)}return a.redirectTo?new ba.Redirect({path:a.path,redirectTo:a.redirectTo}):a}function da(a,b){return function(){return a().then(function(a){return b.configFromComponent(a),a})}}function ea(a,b){if(!m(a))throw new z('Component for route "'+b+'" is not defined, or is not a class.')}function Sa(a){var b=[];return a.forEach(function(a){if(l(a)){var c=a;b=b.concat(c.split("/"))}else b.push(a)}),b}function Ta(a){if(a=a.filter(function(a){return j(a)}),0==a.length)return null;if(1==a.length)return a[0];var b=a[0],c=a.slice(1);return c.reduce(function(a,b){return Ua(b.specificity,a.specificity)==-1?b:a},b)}function Ua(a,b){for(var c=Math.min(a.length,b.length),d=0;d<c;d+=1){var e=x.charCodeAt(a,d),f=x.charCodeAt(b,d),g=f-e;if(0!=g)return g}return a.length-b.length}function Va(a,b){if(m(a)){var c=s.annotations(a);if(j(c))for(var d=0;d<c.length;d++){var e=c[d];if(e instanceof pa.RouteConfig)throw new z('Child routes are not allowed for "'+b+'". Use "..." on the parent\'s route path.')}}}function ab(a,b){var c=Xa;return k(a.component)?c:(j(a.child)&&(c=ab(a.child,j(b)?b.child:null)),c.then(function(c){if(0==c)return!1;if(a.component.reuse)return!0;var d=Wa.getCanActivateHook(a.component.componentType);return!j(d)||d(a.component,j(b)?b.component:null)}))}var q={resolve:function(b){return a.when(b)},reject:function(b){return a.reject(b)},catchError:function(a,b){return a.then(null,b)},all:function(b){return a.all(b)}},r={create:function(a,b){return b=b?b.replace(/g/g,""):"",new RegExp(a,b+"g")},firstMatch:function(a,b){return a.lastIndex=0,a.exec(b)},matcher:function(a,b){return a.lastIndex=0,{re:a,input:b}}},s={annotations:function(a){return a.annotations||[]}},u={create:function(){return{}},set:function(a,b,c){return a[b]=c},get:function(a,b){return a.hasOwnProperty(b)?a[b]:void 0},contains:function(a,b){return a.hasOwnProperty(b)},keys:function(a){return Object.keys(a)},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},delete:function(a,b){delete a[b]},forEach:function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)},equals:function(a,b){var c=Object.keys(a),d=Object.keys(b);if(c.length!=d.length)return!1;for(var e,f=0;f<c.length;f++)if(e=c[f],a[e]!==b[e])return!1;return!0},merge:function(a,b){var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}},w=(Array,{toJSON:function(a){return JSON.stringify(a)},clear:function(a){a.length=0},create:function(){return[]},push:function(a,b){return a.push(b)},forEach:function(a,b){return a.forEach(b)},first:function(a){return a?a[0]:null},last:function(a){return(a&&a.length)>0?a[a.length-1]:null},map:function(a,b){return a.map(b)},join:function(a,b){return a.join(b)},reduce:function(a,b,c){return a.reduce(b,c)},filter:function(a,b){return a.filter(b)},concat:function(a,b){return a.concat(b)},slice:function(a){var b=void 0!==arguments[1]?arguments[1]:0,c=void 0!==arguments[2]?arguments[2]:null;return a.slice(b,null===c?void 0:c)},maximum:function(a,b){if(0==a.length)return null;for(var c=null,d=-(1/0),e=0;e<a.length;e++){var f=a[e];if(!k(f)){var g=b(f);g>d&&(c=f,d=g)}}return c}}),x={charCodeAt:function(a,b){return a.charCodeAt(b)},equals:function(a,b){return a===b},split:function(a,b){return a.split(b)},replaceAll:function(a,b,c){return a.replace(b,c)},replaceAllMapped:function(a,b,c){return a.replace(b,function(a){return a.splice(-2,2),c.apply(null,a)})},contains:function(a,b){return a.indexOf(b)!=-1}},z=Error,A={callNext:function(a,b){a.fn(b)},callEmit:function(a,b){a.fn(b)},subscribe:function(a,b){a.fn=b}};C.prototype.subscribe=function(){},C.prototype.path=function(){return b.url()},C.prototype.go=function(a,c){return b.url(a+c)};var D={Injectable:function(){},OpaqueToken:function(){},Inject:function(){}},E=function(){return D},F=function(){function a(a){var b=this;this.map={},this.keys={},j(a)&&u.forEach(a,function(a,c){b.map[c]=j(a)?a.toString():null,b.keys[c]=!0})}return a.prototype.get=function(a){return u.delete(this.keys,a),this.map[a]},a.prototype.getUnused=function(){var a=this,b={},c=u.keys(this.keys);return c.forEach(function(c){return b[c]=u.get(a.map,c)}),b},a}();D.TouchMap=F,D.normalizeString=G;var H=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};D.convertUrlParamsToArray=I,D.serializeParams=J;var K=function(){function a(a,b,c,d){void 0===b&&(b=null),void 0===c&&(c=i([])),void 0===d&&(d=i({})),this.path=a,this.child=b,this.auxiliary=c,this.params=d}return a.prototype.toString=function(){return this.path+this._matrixParamsToString()+this._auxToString()+this._childString()},a.prototype.segmentToString=function(){return this.path+this._matrixParamsToString()},a.prototype._auxToString=function(){return this.auxiliary.length>0?"("+this.auxiliary.map(function(a){return a.toString()}).join("//")+")":""},a.prototype._matrixParamsToString=function(){var a=J(this.params,";");return a.length>0?";"+a:""},a.prototype._childString=function(){return j(this.child)?"/"+this.child.toString():""},a}();D.Url=K;var L=function(a){function b(b,c,d,e){void 0===c&&(c=null),void 0===d&&(d=i([])),void 0===e&&(e=null),a.call(this,b,c,d,e)}return H(b,a),b.prototype.toString=function(){return this.path+this._auxToString()+this._childString()+this._queryParamsToString()},b.prototype.segmentToString=function(){return this.path+this._queryParamsToString()},b.prototype._queryParamsToString=function(){return k(this.params)?"":"?"+J(this.params)},b}(K);D.RootUrl=L,D.pathSegmentsToUrl=M;var N=r.create("^[^\\/\\(\\)\\?;=&#]+"),P=function(){function a(){}return a.prototype.peekStartsWith=function(a){return this._remaining.startsWith(a)},a.prototype.capture=function(a){if(!this._remaining.startsWith(a))throw new z('Expected "'+a+'".');this._remaining=this._remaining.substring(a.length)},a.prototype.parse=function(a){return this._remaining=a,""==a||"/"==a?new K(""):this.parseRoot()},a.prototype.parseRoot=function(){this.peekStartsWith("/")&&this.capture("/");var a=O(this._remaining);this.capture(a);var b=[];this.peekStartsWith("(")&&(b=this.parseAuxiliaryRoutes()),this.peekStartsWith(";")&&this.parseMatrixParams();var c=null;this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),c=this.parseSegment());var d=null;return this.peekStartsWith("?")&&(d=this.parseQueryParams()),new L(a,c,b,d)},a.prototype.parseSegment=function(){if(0==this._remaining.length)return null;this.peekStartsWith("/")&&this.capture("/");var a=O(this._remaining);this.capture(a);var b=null;this.peekStartsWith(";")&&(b=this.parseMatrixParams());var c=[];this.peekStartsWith("(")&&(c=this.parseAuxiliaryRoutes());var d=null;return this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),d=this.parseSegment()),new K(a,d,c,b)},a.prototype.parseQueryParams=function(){var a={};for(this.capture("?"),this.parseParam(a);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseParam(a);return a},a.prototype.parseMatrixParams=function(){for(var a={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(a);return a},a.prototype.parseParam=function(a){var b=O(this._remaining);if(!k(b)){this.capture(b);var c=!0;if(this.peekStartsWith("=")){this.capture("=");var d=O(this._remaining);j(d)&&(c=d,this.capture(c))}a[b]=c}},a.prototype.parseAuxiliaryRoutes=function(){var a=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)a.push(this.parseSegment()),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),a},a}();D.UrlParser=P,D.parser=new P;var Q=this&&this.__decorate||function(a,b,c,d){var g,e=arguments.length,f=e<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(g=a[h])&&(f=(e<3?g(f):e>3?g(b,c,f):g(b,c))||f);return e>3&&f&&Object.defineProperty(b,c,f),f},R=function(){function a(a){this.name=a}return a=Q([h()],a)}();D.RouteLifecycleHook=R;var S=function(){function a(a){this.fn=a}return a=Q([h()],a)}();D.CanActivate=S,D.routerCanReuse=i(new R("routerCanReuse")),D.routerCanDeactivate=i(new R("routerCanDeactivate")),D.routerOnActivate=i(new R("routerOnActivate")),D.routerOnReuse=i(new R("routerOnReuse")),D.routerOnDeactivate=i(new R("routerOnDeactivate"));var T=E("./lifecycle_annotations_impl");D.hasLifecycleHook=U,D.getCanActivateHook=V;var H=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},Q=this&&this.__decorate||function(a,b,c,d){var g,e=arguments.length,f=e<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(g=a[h])&&(f=(e<3?g(f):e>3?g(b,c,f):g(b,c))||f);return e>3&&f&&Object.defineProperty(b,c,f),f},W=E("../route_definition");D.RouteDefinition=W.RouteDefinition;var X=function(){function a(a){this.configs=a}return a=Q([h()],a)}();D.RouteConfig=X;var Y=function(){function a(a){var b=a.name,c=a.useAsDefault,d=a.path,e=a.regex,f=a.serializer,g=a.data;this.name=b,this.useAsDefault=c,this.path=d,this.regex=e,this.serializer=f,this.data=g}return a=Q([h()],a)}();D.AbstractRoute=Y;var Z=function(a){function b(b){var c=b.name,d=b.useAsDefault,e=b.path,f=b.regex,g=b.serializer,h=b.data,i=b.component;a.call(this,{name:c,useAsDefault:d,path:e,regex:f,serializer:g,data:h}),this.aux=null,this.component=i}return H(b,a),b=Q([h()],b)}(Y);D.Route=Z;var $=function(a){function b(b){var c=b.name,d=b.useAsDefault,e=b.path,f=b.regex,g=b.serializer,h=b.data,i=b.component;a.call(this,{name:c,useAsDefault:d,path:e,regex:f,serializer:g,data:h}),this.component=i}return H(b,a),b=Q([h()],b)}(Y);D.AuxRoute=$;var _=function(a){function b(b){var c=b.name,d=b.useAsDefault,e=b.path,f=b.regex,g=b.serializer,h=b.data,i=b.loader;a.call(this,{name:c,useAsDefault:d,path:e,regex:f,serializer:g,data:h}),this.aux=null,this.loader=i}return H(b,a),b=Q([h()],b)}(Y);D.AsyncRoute=_;var aa=function(a){function b(b){var c=b.name,d=b.useAsDefault,e=b.path,f=b.regex,g=b.serializer,h=b.data,i=b.redirectTo;a.call(this,{name:c,useAsDefault:d,path:e,regex:f,serializer:g,data:h}),this.redirectTo=i}return H(b,a),b=Q([h()],b)}(Y);D.Redirect=aa;var ba=E("./route_config_decorator");D.normalizeRouteConfig=ca,D.assertComponentExists=ea;var fa=E("../../instruction"),ga=function(){function a(a,b){void 0===b&&(b=null),this._loader=a,this._resolvedComponent=null,this.data=j(b)?new fa.RouteData(b):fa.BLANK_ROUTE_DATA}return a.prototype.resolveComponentType=function(){var a=this;return j(this._resolvedComponent)?this._resolvedComponent:this._resolvedComponent=this._loader().then(function(b){return a.componentType=b,b})},a}();D.AsyncRouteHandler=ga;var fa=E("../../instruction"),ha=function(){function a(a,b){this.componentType=a,this._resolvedComponent=null,this._resolvedComponent=q.resolve(a),this.data=j(b)?new fa.RouteData(b):fa.BLANK_ROUTE_DATA}return a.prototype.resolveComponentType=function(){return this._resolvedComponent},a}();D.SyncRouteHandler=ha;var H=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},ia=E("../url_parser"),fa=E("../instruction"),ja=function(){function a(){}return a}();D.RouteMatch=ja;var ka=function(a){function b(b,c,d){a.call(this),this.instruction=b,this.remaining=c,this.remainingAux=d}return H(b,a),b}(ja);D.PathMatch=ka;var la=function(a){function b(b,c){a.call(this),this.redirectTo=b,this.specificity=c}return H(b,a),b}(ja);D.RedirectMatch=la;var ma=function(){function a(a,b){this._pathRecognizer=a,this.redirectTo=b,this.hash=this._pathRecognizer.hash}return Object.defineProperty(a.prototype,"path",{get:function(){return this._pathRecognizer.toString()},set:function(a){throw new z("you cannot set the path of a RedirectRule directly")},enumerable:!0,configurable:!0}),a.prototype.recognize=function(a){var b=null;return j(this._pathRecognizer.matchUrl(a))&&(b=new la(this.redirectTo,this._pathRecognizer.specificity)),q.resolve(b)},a.prototype.generate=function(a){throw new z("Tried to generate a redirect.")},a}();D.RedirectRule=ma;var na=function(){function a(a,b){this._routePath=a,this.handler=b,this._cache=new Map,this.specificity=this._routePath.specificity,this.hash=this._routePath.hash,this.terminal=this._routePath.terminal}return Object.defineProperty(a.prototype,"path",{get:function(){return this._routePath.toString()},set:function(a){throw new z("you cannot set the path of a RouteRule directly")},enumerable:!0,configurable:!0}),a.prototype.recognize=function(a){var b=this,c=this._routePath.matchUrl(a);return k(c)?null:this.handler.resolveComponentType().then(function(a){var d=b._getInstruction(c.urlPath,c.urlParams,c.allParams);return new ka(d,c.rest,c.auxiliary)})},a.prototype.generate=function(a){var b=this._routePath.generateUrl(a),c=b.urlPath,d=b.urlParams;return this._getInstruction(c,ia.convertUrlParamsToArray(d),a)},a.prototype.generateComponentPathValues=function(a){return this._routePath.generateUrl(a)},a.prototype._getInstruction=function(a,b,c){if(k(this.handler.componentType))throw new z("Tried to get instruction before the type was loaded.");var d=a+"?"+b.join("&");if(this._cache.has(d))return this._cache.get(d);var e=new fa.ComponentInstruction(a,b,this.handler.data,this.handler.componentType,this.terminal,this.specificity,c);return this._cache.set(d,e),e},a}();D.RouteRule=na;var oa=E("./rules"),pa=E("../route_config/route_config_impl"),qa=E("./route_handlers/async_route_handler"),ra=E("./route_handlers/sync_route_handler"),sa=E("./route_paths/param_route_path"),ta=E("./route_paths/regex_route_path"),ua=function(){function a(){this.rulesByName=new Map,this.auxRulesByName=new Map,this.auxRulesByPath=new Map,this.rules=[],this.defaultRule=null}return a.prototype.config=function(a){var b;if(j(a.name)&&a.name[0].toUpperCase()!=a.name[0]){var c=a.name[0].toUpperCase()+a.name.substring(1);throw new z('Route "'+a.path+'" with name "'+a.name+'" does not begin with an uppercase letter. Route names should be CamelCase like "'+c+'".')}if(a instanceof pa.AuxRoute){b=new ra.SyncRouteHandler(a.component,a.data);var d=this._getRoutePath(a),e=new oa.RouteRule(d,b);return this.auxRulesByPath.set(d.toString(),e),j(a.name)&&this.auxRulesByName.set(a.name,e),e.terminal}var f=!1;if(a instanceof pa.Redirect){var g=this._getRoutePath(a),h=new oa.RedirectRule(g,a.redirectTo);return this._assertNoHashCollision(h.hash,a.path),this.rules.push(h),!0}a instanceof pa.Route?(b=new ra.SyncRouteHandler(a.component,a.data),f=j(a.useAsDefault)&&a.useAsDefault):a instanceof pa.AsyncRoute&&(b=new qa.AsyncRouteHandler(a.loader,a.data),f=j(a.useAsDefault)&&a.useAsDefault);var i=this._getRoutePath(a),k=new oa.RouteRule(i,b);if(this._assertNoHashCollision(k.hash,a.path),f){if(j(this.defaultRule))throw new z("Only one route can be default");this.defaultRule=k}return this.rules.push(k),j(a.name)&&this.rulesByName.set(a.name,k),k.terminal},a.prototype.recognize=function(a){var b=[];return this.rules.forEach(function(c){var d=c.recognize(a);j(d)&&b.push(d)}),0==b.length&&j(a)&&a.auxiliary.length>0?[q.resolve(new oa.PathMatch(null,null,a.auxiliary))]:b},a.prototype.recognizeAuxiliary=function(a){var b=this.auxRulesByPath.get(a.path);return j(b)?[b.recognize(a)]:[q.resolve(null)]},a.prototype.hasRoute=function(a){return this.rulesByName.has(a)},a.prototype.componentLoaded=function(a){return this.hasRoute(a)&&j(this.rulesByName.get(a).handler.componentType)},a.prototype.loadComponent=function(a){return this.rulesByName.get(a).handler.resolveComponentType()},a.prototype.generate=function(a,b){var c=this.rulesByName.get(a);return k(c)?null:c.generate(b)},a.prototype.generateAuxiliary=function(a,b){var c=this.auxRulesByName.get(a);return k(c)?null:c.generate(b)},a.prototype._assertNoHashCollision=function(a,b){this.rules.forEach(function(c){if(a==c.hash)throw new z("Configuration '"+b+"' conflicts with existing route '"+c.path+"'")})},a.prototype._getRoutePath=function(a){if(j(a.regex)){if(isFunction(a.serializer))return new ta.RegexRoutePath(a.regex,a.serializer);throw new z("Route provides a regex property, '"+a.regex+"', but no serializer property")}if(j(a.path)){var b=a instanceof pa.AuxRoute&&a.path.startsWith("/")?a.path.substring(1):a.path;return new sa.ParamRoutePath(b)}throw new z("Route must provide either a path or regex property")},a}();D.RuleSet=ua;var va=function(){function a(a,b,c,d,e){this.urlPath=a,this.urlParams=b,this.allParams=c,this.auxiliary=d,this.rest=e}return a}();D.MatchedUrl=va;var wa=function(){function a(a,b){this.urlPath=a,this.urlParams=b}return a}();D.GeneratedUrl=wa;var xa=E("../../utils"),ia=E("../../url_parser"),ya=E("./route_path"),za=function(){function a(){this.name="",this.specificity="",this.hash="..."}return a.prototype.generate=function(a){return""},a.prototype.match=function(a){return!0},a}(),Aa=function(){function a(a){this.path=a,this.name="",this.specificity="2",this.hash=a}return a.prototype.match=function(a){return a==this.path},a.prototype.generate=function(a){return this.path},a}(),Ba=function(){function a(a){this.name=a,this.specificity="1",this.hash=":"}return a.prototype.match=function(a){return a.length>0},a.prototype.generate=function(a){if(!u.contains(a.map,this.name))throw new z("Route generator for '"+this.name+"' was not included in parameters passed.");return xa.normalizeString(a.get(this.name))},a.paramMatcher=/^:([^\/]+)$/g,a}(),Ca=function(){function a(a){this.name=a,this.specificity="0",this.hash="*"}return a.prototype.match=function(a){return!0},a.prototype.generate=function(a){return xa.normalizeString(a.get(this.name))},a.wildcardMatcher=/^\*([^\/]+)$/g,a}(),Da=function(){function a(a){this.routePath=a,this.terminal=!0,this._assertValidPath(a),this._parsePathString(a),this.specificity=this._calculateSpecificity(),this.hash=this._calculateHash();var b=this._segments[this._segments.length-1];this.terminal=!(b instanceof za)}return a.prototype.matchUrl=function(a){for(var c,b=a,d={},e=[],f=0;f<this._segments.length;f+=1){var g=this._segments[f];if(c=b,g instanceof za)break;if(j(c)){if(g instanceof Ca){d[g.name]=c.toString(),e.push(c.toString()),b=null;break}if(e.push(c.path),g instanceof Ba)d[g.name]=c.path;else if(!g.match(c.path))return null;b=c.child}else if(!g.match(""))return null}if(this.terminal&&j(b))return null;var h=e.join("/"),i=[],k=[],l=d;if(j(c)){var m=a instanceof ia.RootUrl?a:c;j(m.params)?(l=u.merge(m.params,d),k=ia.convertUrlParamsToArray(m.params)):l=d,i=c.auxiliary}return new ya.MatchedUrl(h,k,l,i,b)},a.prototype.generateUrl=function(a){for(var b=new xa.TouchMap(a),c=[],d=0;d<this._segments.length;d++){var e=this._segments[d];e instanceof za||c.push(e.generate(b))}var f=c.join("/"),g=b.getUnused(),h=g;return new ya.GeneratedUrl(f,h)},a.prototype.toString=function(){return this.routePath},a.prototype._parsePathString=function(a){a.startsWith("/")&&(a=a.substring(1));var b=a.split("/");this._segments=[];for(var c=b.length-1,d=0;d<=c;d++){var f,e=b[d];if(j(f=r.firstMatch(Ba.paramMatcher,e)))this._segments.push(new Ba(f[1]));else if(j(f=r.firstMatch(Ca.wildcardMatcher,e)))this._segments.push(new Ca(f[1]));else if("..."==e){if(d<c)throw new z('Unexpected "..." before the end of the path for "'+a+'".');this._segments.push(new za)}else this._segments.push(new Aa(e))}},a.prototype._calculateSpecificity=function(){var a,c,b=this._segments.length;if(0==b)c+="2";else for(c="",a=0;a<b;a++)c+=this._segments[a].specificity;return c},a.prototype._calculateHash=function(){var a,b=this._segments.length,c=[];for(a=0;a<b;a++)c.push(this._segments[a].hash);return c.join("/")},a.prototype._assertValidPath=function(b){if(x.contains(b,"#"))throw new z('Path "'+b+'" should not include "#". Use "HashLocationStrategy" instead.');var c=r.firstMatch(a.RESERVED_CHARS,b);if(j(c))throw new z('Path "'+b+'" contains "'+c[0]+'" which is not allowed in a route config.')},a.RESERVED_CHARS=r.create("//|\\(|\\)|;|\\?|="),a}();D.ParamRoutePath=Da;var ya=E("./route_path"),Ea=function(){function a(a,b){this._reString=a,this._serializer=b,this.terminal=!0,this.specificity="2",this.hash=this._reString,this._regex=r.create(this._reString)}return a.prototype.matchUrl=function(a){var b=a.toString(),c={},d=r.matcher(this._regex,b),e=RegExpMatcherWrapper.next(d);if(k(e))return null;for(var f=0;f<e.length;f+=1)c[f.toString()]=e[f];return new ya.MatchedUrl(b,[],c,[],null)},a.prototype.generateUrl=function(a){return this._serializer(a)},a.prototype.toString=function(){return this._reString},a}();D.RegexRoutePath=Ea;var H=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},Fa=function(){function a(a){this.params=a}return a.prototype.get=function(a){return normalizeBlank(u.get(this.params,a))},a}();D.RouteParams=Fa;var Ga=function(){function a(a){void 0===a&&(a=i({})),this.data=a}return a.prototype.get=function(a){return normalizeBlank(u.get(this.data,a))},a}();D.RouteData=Ga,D.BLANK_ROUTE_DATA=new Ga;var Ha=function(){function a(a,b,c){this.component=a,this.child=b,this.auxInstruction=c}return Object.defineProperty(a.prototype,"urlPath",{get:function(){return j(this.component)?this.component.urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"urlParams",{get:function(){return j(this.component)?this.component.urlParams:[]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"specificity",{get:function(){var a="";return j(this.component)&&(a+=this.component.specificity),j(this.child)&&(a+=this.child.specificity),a},enumerable:!0,configurable:!0}),a.prototype.toRootUrl=function(){return this.toUrlPath()+this.toUrlQuery()},a.prototype._toNonRootUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(j(this.child)?this.child._toNonRootUrl():"")},a.prototype.toUrlQuery=function(){return this.urlParams.length>0?"?"+this.urlParams.join("&"):""},a.prototype.replaceChild=function(a){return new Ia(this.component,a,this.auxInstruction)},a.prototype.toUrlPath=function(){return this.urlPath+this._stringifyAux()+(j(this.child)?this.child._toNonRootUrl():"")},a.prototype.toLinkUrl=function(){return this.urlPath+this._stringifyAux()+(j(this.child)?this.child._toLinkUrl():"")},a.prototype._toLinkUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(j(this.child)?this.child._toLinkUrl():"")},a.prototype._stringifyPathMatrixAuxPrefixed=function(){var a=this._stringifyPathMatrixAux();return a.length>0&&(a="/"+a),a},a.prototype._stringifyMatrixParams=function(){return this.urlParams.length>0?";"+this.urlParams.join(";"):""},a.prototype._stringifyPathMatrixAux=function(){return k(this.component)?"":this.urlPath+this._stringifyMatrixParams()+this._stringifyAux()},a.prototype._stringifyAux=function(){var a=[];return u.forEach(this.auxInstruction,function(b,c){a.push(b._stringifyPathMatrixAux())}),a.length>0?"("+a.join("//")+")":""},a}();D.Instruction=Ha;var Ia=function(a){function b(b,c,d){a.call(this,b,c,d)}return H(b,a),b.prototype.resolveComponent=function(){return q.resolve(this.component)},b}(Ha);D.ResolvedInstruction=Ia;var Ja=function(a){function b(b,c){a.call(this,b,c,{})}return H(b,a),b.prototype.toLinkUrl=function(){return""},b.prototype._toLinkUrl=function(){return""},b}(Ia);D.DefaultInstruction=Ja;var Ka=function(a){function b(b,c,d){void 0===c&&(c=""),void 0===d&&(d=i([])),a.call(this,null,null,{}),this._resolver=b,this._urlPath=c,this._urlParams=d}return H(b,a),Object.defineProperty(b.prototype,"urlPath",{get:function(){return j(this.component)?this.component.urlPath:j(this._urlPath)?this._urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"urlParams",{get:function(){return j(this.component)?this.component.urlParams:j(this._urlParams)?this._urlParams:[]},enumerable:!0,configurable:!0}),b.prototype.resolveComponent=function(){var a=this;return j(this.component)?q.resolve(this.component):this._resolver().then(function(b){return a.child=b.child,a.component=b.component})},b}(Ha);D.UnresolvedInstruction=Ka;var La=function(a){function b(b,c,d,e){a.call(this,b,c,d),this._specificity=e}return H(b,a),Object.defineProperty(b.prototype,"specificity",{get:function(){return this._specificity},enumerable:!0,configurable:!0}),b}(Ia);D.RedirectInstruction=La;var Ma=function(){function a(a,b,c,d,e,f,g){void 0===g&&(g=null),this.urlPath=a,this.urlParams=b,this.componentType=d,this.terminal=e,this.specificity=f,this.params=g,this.reuse=!1,this.routeData=j(c)?c:D.BLANK_ROUTE_DATA}return a}();D.ComponentInstruction=Ma;var Na=E("angular2/core"),pa=E("./route_config/route_config_impl"),oa=E("./rules/rules"),Oa=E("./rules/rule_set"),fa=E("./instruction"),Pa=E("./route_config/route_config_normalizer"),ia=E("./url_parser"),Qa=q.resolve(null);D.ROUTER_PRIMARY_COMPONENT=i(new Na.OpaqueToken("RouterPrimaryComponent"));var Ra=function(){function a(a){this._rootComponent=a,this._rules=new Map}return a.prototype.config=function(a,b){b=Pa.normalizeRouteConfig(b,this),b instanceof pa.Route?Pa.assertComponentExists(b.component,b.path):b instanceof pa.AuxRoute&&Pa.assertComponentExists(b.component,b.path);var c=this._rules.get(a);k(c)&&(c=new Oa.RuleSet,this._rules.set(a,c));var d=c.config(b);b instanceof pa.Route&&(d?Va(b.component,b.path):this.configFromComponent(b.component))},a.prototype.configFromComponent=function(a){var b=this;if(m(a)&&!this._rules.has(a)){var c=s.annotations(a);if(j(c))for(var d=0;d<c.length;d++){var e=c[d];if(e instanceof pa.RouteConfig){var f=e.configs;f.forEach(function(c){return b.config(a,c)})}}}},a.prototype.recognize=function(a,b){var c=ia.parser.parse(a);return this._recognize(c,[])},a.prototype._recognize=function(a,b,c){var d=this;void 0===c&&(c=!1);var e=w.last(b),f=j(e)?e.component.componentType:this._rootComponent,g=this._rules.get(f);if(k(g))return Qa;var h=c?g.recognizeAuxiliary(a):g.recognize(a),i=h.map(function(a){
return a.then(function(a){if(a instanceof oa.PathMatch){var c=b.length>0?[w.last(b)]:[],e=d._auxRoutesToUnresolved(a.remainingAux,c),f=new fa.ResolvedInstruction(a.instruction,null,e);if(k(a.instruction)||a.instruction.terminal)return f;var g=b.concat([f]);return d._recognize(a.remaining,g).then(function(a){return k(a)?null:a instanceof fa.RedirectInstruction?a:(f.child=a,f)})}if(a instanceof oa.RedirectMatch){var f=d.generate(a.redirectTo,b.concat([null]));return new fa.RedirectInstruction(f.component,f.child,f.auxInstruction,a.specificity)}})});return!k(a)&&""!=a.path||0!=h.length?q.all(i).then(Ta):q.resolve(this.generateDefault(f))},a.prototype._auxRoutesToUnresolved=function(a,b){var c=this,d={};return a.forEach(function(a){d[a.path]=new fa.UnresolvedInstruction(function(){return c._recognize(a,b,!0)})}),d},a.prototype.generate=function(a,b,c){void 0===c&&(c=!1);var e,d=Sa(a);if(""==w.first(d))d.shift(),e=w.first(b),b=[];else if(e=b.length>0?b.pop():null,"."==w.first(d))d.shift();else if(".."==w.first(d))for(;".."==w.first(d);){if(b.length<=0)throw new z('Link "'+w.toJSON(a)+'" has too many "../" segments.');e=b.pop(),d=w.slice(d,1)}else{var f=w.first(d),g=this._rootComponent,h=null;if(b.length>1){var i=b[b.length-1],l=b[b.length-2];g=i.component.componentType,h=l.component.componentType}else 1==b.length&&(g=b[0].component.componentType,h=this._rootComponent);var m=this.hasRoute(f,g),n=j(h)&&this.hasRoute(f,h);if(n&&m){var o='Link "'+w.toJSON(a)+'" is ambiguous, use "./" or "../" to disambiguate.';throw new z(o)}n&&(e=b.pop())}if(""==d[d.length-1]&&d.pop(),d.length>0&&""==d[0]&&d.shift(),d.length<1){var o='Link "'+w.toJSON(a)+'" must include a route name.';throw new z(o)}for(var p=this._generate(d,b,e,c,a),q=b.length-1;q>=0;q--){var r=b[q];if(k(r))break;p=r.replaceChild(p)}return p},a.prototype._generate=function(a,b,c,d,e){var f=this;void 0===d&&(d=!1);var g=this._rootComponent,h=null,i={},m=w.last(b);if(j(m)&&j(m.component)&&(g=m.component.componentType),0==a.length){var q=this.generateDefault(g);if(k(q))throw new z('Link "'+w.toJSON(e)+'" does not resolve to a terminal instruction.');return q}j(c)&&!d&&(i=u.merge(c.auxInstruction,i),h=c.component);var r=this._rules.get(g);if(k(r))throw new z('Component "'+p(g)+'" has no route config.');var s=0,t={};if(s<a.length&&l(a[s])){var v=a[s];if(""==v||"."==v||".."==v)throw new z('"'+v+'/" is only allowed at the beginning of a link DSL.');if(s+=1,s<a.length){var x=a[s];n(x)&&!o(x)&&(t=x,s+=1)}var y=(d?r.auxRulesByName:r.rulesByName).get(v);if(k(y))throw new z('Component "'+p(g)+'" has no route named "'+v+'".');if(k(y.handler.componentType)){var A=y.generateComponentPathValues(t);return new fa.UnresolvedInstruction(function(){return y.handler.resolveComponentType().then(function(g){return f._generate(a,b,c,d,e)})},A.urlPath,ia.convertUrlParamsToArray(A.urlParams))}h=d?r.generateAuxiliary(v,t):r.generate(v,t)}for(;s<a.length&&o(a[s]);){var B=[m],C=this._generate(a[s],B,null,!0,e);i[C.component.urlPath]=C,s+=1}var D=new fa.ResolvedInstruction(h,null,i);if(j(h)&&j(h.componentType)){var E=null;if(h.terminal)s>=a.length;else{var F=b.concat([D]),G=a.slice(s);E=this._generate(G,F,null,!1,e)}D.child=E}return D},a.prototype.hasRoute=function(a,b){var c=this._rules.get(b);return!k(c)&&c.hasRoute(a)},a.prototype.generateDefault=function(a){var b=this;if(k(a))return null;var c=this._rules.get(a);if(k(c)||k(c.defaultRule))return null;var d=null;if(j(c.defaultRule.handler.componentType)){var e=c.defaultRule.generate({});return c.defaultRule.terminal||(d=this.generateDefault(c.defaultRule.handler.componentType)),new fa.DefaultInstruction(e,d)}return new fa.UnresolvedInstruction(function(){return c.defaultRule.handler.resolveComponentType().then(function(c){return b.generateDefault(a)})})},a}();D.RouteRegistry=Ra;var H=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},Wa=E("./lifecycle/route_lifecycle_reflector"),Xa=q.resolve(!0),Ya=q.resolve(!1),Za=function(){function a(a,b,c){this.registry=a,this.parent=b,this.hostComponent=c,this.navigating=!1,this._currentInstruction=null,this._currentNavigation=Xa,this._outlet=null,this._auxRouters=new Map,this._subject=new y}return a.prototype.childRouter=function(a){return this._childRouter=new _a(this,a)},a.prototype.auxRouter=function(a){return new _a(this,a)},a.prototype.registerPrimaryOutlet=function(a){if(j(a.name))throw new z("registerPrimaryOutlet expects to be called with an unnamed outlet.");if(j(this._outlet))throw new z("Primary outlet is already registered.");return this._outlet=a,j(this._currentInstruction)?this.commit(this._currentInstruction,!1):Xa},a.prototype.unregisterPrimaryOutlet=function(a){if(j(a.name))throw new z("registerPrimaryOutlet expects to be called with an unnamed outlet.");this._outlet=null},a.prototype.registerAuxOutlet=function(a){var b=a.name;if(k(b))throw new z("registerAuxOutlet expects to be called with an outlet with a name.");var c=this.auxRouter(this.hostComponent);this._auxRouters.set(b,c),c._outlet=a;var d;return j(this._currentInstruction)&&j(d=this._currentInstruction.auxInstruction[b])?c.commit(d):Xa},a.prototype.isRouteActive=function(a){for(var b=this;j(b.parent)&&j(a.child);)b=b.parent,a=a.child;return j(this._currentInstruction)&&this._currentInstruction.component==a.component},a.prototype.config=function(a){var b=this;return a.forEach(function(a){b.registry.config(b.hostComponent,a)}),this.renavigate()},a.prototype.navigate=function(a){var b=this.generate(a);return this.navigateByInstruction(b,!1)},a.prototype.navigateByUrl=function(a,b){var c=this;return void 0===b&&(b=!1),this._currentNavigation=this._currentNavigation.then(function(d){return c.lastNavigationAttempt=a,c._startNavigating(),c._afterPromiseFinishNavigating(c.recognize(a).then(function(a){return!k(a)&&c._navigate(a,b)}))})},a.prototype.navigateByInstruction=function(a,b){var c=this;return void 0===b&&(b=!1),k(a)?Ya:this._currentNavigation=this._currentNavigation.then(function(d){return c._startNavigating(),c._afterPromiseFinishNavigating(c._navigate(a,b))})},a.prototype._settleInstruction=function(a){var b=this;return a.resolveComponent().then(function(c){var d=[];return j(a.component)&&(a.component.reuse=!1),j(a.child)&&d.push(b._settleInstruction(a.child)),u.forEach(a.auxInstruction,function(a,c){d.push(b._settleInstruction(a))}),q.all(d)})},a.prototype._navigate=function(a,b){var c=this;return this._settleInstruction(a).then(function(b){return c._routerCanReuse(a)}).then(function(b){return c._canActivate(a)}).then(function(d){return!!d&&c._routerCanDeactivate(a).then(function(d){if(d)return c.commit(a,b).then(function(b){return c._emitNavigationFinish(a.toRootUrl()),!0})})})},a.prototype._emitNavigationFinish=function(a){A.callEmit(this._subject,a)},a.prototype._afterPromiseFinishNavigating=function(a){var b=this;return q.catchError(a.then(function(a){return b._finishNavigating()}),function(a){throw b._finishNavigating(),a})},a.prototype._routerCanReuse=function(a){var b=this;return k(this._outlet)?Ya:k(a.component)?Xa:this._outlet.routerCanReuse(a.component).then(function(c){if(a.component.reuse=c,c&&j(b._childRouter)&&j(a.child))return b._childRouter._routerCanReuse(a.child)})},a.prototype._canActivate=function(a){return ab(a,this._currentInstruction)},a.prototype._routerCanDeactivate=function(a){var b=this;if(k(this._outlet))return Xa;var c,d=null,e=!1,f=null;return j(a)&&(d=a.child,f=a.component,e=k(a.component)||a.component.reuse),c=e?Xa:this._outlet.routerCanDeactivate(f),c.then(function(a){return 0!=a&&(!j(b._childRouter)||b._childRouter._routerCanDeactivate(d))})},a.prototype.commit=function(a,b){var c=this;void 0===b&&(b=!1),this._currentInstruction=a;var d=Xa;if(j(this._outlet)&&j(a.component)){var e=a.component;d=e.reuse?this._outlet.reuse(e):this.deactivate(a).then(function(a){return c._outlet.activate(e)}),j(a.child)&&(d=d.then(function(b){if(j(c._childRouter))return c._childRouter.commit(a.child)}))}var f=[];return this._auxRouters.forEach(function(b,c){j(a.auxInstruction[c])&&f.push(b.commit(a.auxInstruction[c]))}),d.then(function(a){return q.all(f)})},a.prototype._startNavigating=function(){this.navigating=!0},a.prototype._finishNavigating=function(){this.navigating=!1},a.prototype.subscribe=function(a){return A.subscribe(this._subject,a)},a.prototype.deactivate=function(a){var b=this,c=null,d=null;j(a)&&(c=a.child,d=a.component);var e=Xa;return j(this._childRouter)&&(e=this._childRouter.deactivate(c)),j(this._outlet)&&(e=e.then(function(a){return b._outlet.deactivate(d)})),e},a.prototype.recognize=function(a){var b=this._getAncestorInstructions();return this.registry.recognize(a,b)},a.prototype._getAncestorInstructions=function(){for(var a=[this._currentInstruction],b=this;j(b=b.parent);)a.unshift(b._currentInstruction);return a},a.prototype.renavigate=function(){return k(this.lastNavigationAttempt)?this._currentNavigation:this.navigateByUrl(this.lastNavigationAttempt)},a.prototype.generate=function(a){var b=this._getAncestorInstructions();return this.registry.generate(a,b)},a}();D.Router=Za;var $a=function(a){function b(b,c,d){var e=this;a.call(this,b,null,d),this._location=c,this._locationSub=this._location.subscribe(function(a){e.recognize(a.url).then(function(b){e.navigateByInstruction(b,j(a.pop)).then(function(c){if(!j(a.pop)||"hashchange"==a.type){var d=b.toUrlPath(),f=b.toUrlQuery();d.length>0&&"/"!=d[0]&&(d="/"+d),"hashchange"==a.type?b.toRootUrl()!=e._location.path()&&e._location.replaceState(d,f):e._location.go(d,f)}})})}),this.registry.configFromComponent(d),this.navigateByUrl(c.path())}return H(b,a),b.prototype.commit=function(b,c){var d=this;void 0===c&&(c=!1);var e=b.toUrlPath(),f=b.toUrlQuery();e.length>0&&"/"!=e[0]&&(e="/"+e);var g=a.prototype.commit.call(this,b);return c||(g=g.then(function(a){d._location.go(e,f)})),g},b.prototype.dispose=function(){j(this._locationSub)&&(A.dispose(this._locationSub),this._locationSub=null)},b}(Za);D.RootRouter=$a;var _a=function(a){function b(b,c){a.call(this,b.registry,b,c),this.parent=b}return H(b,a),b.prototype.navigateByUrl=function(a,b){return void 0===b&&(b=!1),this.parent.navigateByUrl(a,b)},b.prototype.navigateByInstruction=function(a,b){return void 0===b&&(b=!1),this.parent.navigateByInstruction(a,b)},b}(Za);D.getCanActivateHook=function(a){var b=c.getTypeByName(a);return b&&b.$canActivate&&function(a,c){return f.invoke(b.$canActivate,null,{$nextInstruction:a,$prevInstruction:c})}},D.assertComponentExists=function(){},angular.stringifyInstruction=function(a){return a.toRootUrl()};var Ra=D.RouteRegistry,$a=D.RootRouter,bb=new Ra(g),cb=new C;c(function(a,b){angular.isArray(b.$routeConfig)&&b.$routeConfig.forEach(function(b){bb.config(a,b)})});var db=new $a(bb,cb,g);return e.$watch(function(){return b.url()},function(a){db.lastNavigationAttempt!==a&&db.navigateByUrl(a)}),db.subscribe(function(){e.$broadcast("$routeChangeSuccess",{})}),db}var b=function(){function a(){this.directiveBuffer=[],this.directiveFactoriesByName={},this.onDirectiveRegistered=null}return a.prototype.register=function(a,b){angular.isArray(b)&&(b=b[b.length-1]),this.directiveFactoriesByName[a]=b,this.onDirectiveRegistered?this.onDirectiveRegistered(a,b):this.directiveBuffer.push({name:a,factory:b})},a.prototype.$get=function(){var a=this,b=function(b){for(a.onDirectiveRegistered=b;a.directiveBuffer.length>0;){var c=a.directiveBuffer.pop();a.onDirectiveRegistered(c.name,c.factory)}};return b.getTypeByName=function(b){return a.directiveFactoriesByName[b]},b},a}();angular.module("ngComponentRouter",[]).directive("ngOutlet",["$animate","$q","$rootRouter",c]).directive("ngOutlet",["$compile",d]).directive("ngLink",["$rootRouter","$parse",f]).directive("$router",["$q",e]),angular.module("ng").provider("$$directiveIntrospector",b).config(["$compileProvider","$$directiveIntrospectorProvider",a]),angular.module("ngComponentRouter").value("$route",null).value("$routerRootComponent",new Object).factory("$rootRouter",["$q","$location","$$directiveIntrospector","$browser","$rootScope","$injector","$routerRootComponent",h])}();